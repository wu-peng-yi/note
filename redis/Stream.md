[TOC]

## 1.基本介绍

从Redis5 开始，推出了 Stream 功能。

在Stream 中，有一个消息链表，所有假如链表中的消息都会被串起来。每一条消息都有一个唯一的ID，还有对应的消息内容，所谓的消息内容，就是键值对。

一个Stream 上可以有多个消费者，每一个消费者都有一个游标，这个游标根据消息的消费情况在链表上移动，多个消费者之间互相独立互不影响。

## 2. 基本命令
xadd 添加消息

xdel 删除消息

xrange 获取消息列表

del 删除 Stream

xread 消费

## 3.info指令

## 4.过期策略
Redis 中所有的key都可以设置过期时间。

所有被设置了过期时间的key 都会存放在一个独立的字典中，删除这些key 有两种不同的策略:

1.定时任务定期删除。Redis默认每秒进行10次过期扫描，每次从字典中随机拿出来 20 个key，删除这 20 个 key 中已经过期的key,如果删除的key 的比例超过了四分之一，就再拿20个进行删除，以此类推。

2.当客户端访问的时候，再去查看key是否过期，如果过期则删除

需要注意的是，如果是主从架构，从机是不会进行Key的过期扫描的，主机的key 过期后，会自动同步到从机上。

## 5.LRU
因为Redis是基于内存的，当Redis所使用的内存超出物理内存限制的时候，内存中的数据会和磁盘产生频繁的交换，这种交换会让Redis的性能急剧下降，所以在实际开发中，我们是不允许Redis出现交换(swap)行为的。

当Redis实际内存超过系统可用内存之后，Redis提供了几种策略:
- noenviction：默认策略，此时写操作停止，删除和读取可以进行。
- volatile-lru：淘汰设置了过期时间的key，最近最少使用的key 会被淘汰。如果一个key没有设置过期时间，则不会被淘汰。
- volatile-ttl：淘汰设置了过期时间的key，根据key的ttl值，ttl越小，越优先淘汰。
- volatile-random：淘汰设置了过期时间的key，随机移除。
- allkeys-lru：淘汰所有的key，最近最少使用的key 会被淘汰。
- allkeys-random：淘汰所有的key，随机移除。

## 6.lazy free
Redis是一个单线程程序，如果直接删除一个很大的key，可能会造成卡顿。

unlink(Redis4.0之后有效)

## 7.ssl
